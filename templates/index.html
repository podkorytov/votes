<html>
  <head>
	<title>Index</title>
	<script src="//cdn.socket.io/socket.io-1.2.0.js"></script>
	<script src="//code.jquery.com/jquery-1.11.1.js"></script>
	<script src="/socket.io/socket.io.js"></script>
	<script>
		$(function() {
			var socket = io();
            var userHash = localStorage.getItem('user_hash');

            if (!userHash) {
                $.post('/register', function( data ) {
                    userHash = data.user_hash

                    localStorage.setItem('user_hash', userHash)
                });
            }


			$('#red').on('click', function() {
				socket.emit('vote', { user_hash: userHash, color : 'red'});
			});
            $('#blue').on('click', function() {
                socket.emit('vote', { user_hash: userHash, color : 'blue'});
            });
		});
	</script>
  </head>
  <body>
    <h1>Index</h1>
    <a href="#" id="red">Красная кнопка</a>
    <a href="#" id="blue">Синяя кнопка</a>
  </body>
</html>