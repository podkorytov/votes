<html>
  <head>
	<title>Stat</title>
	<script src="//cdn.socket.io/socket.io-1.2.0.js"></script>
	<script src="//code.jquery.com/jquery-1.11.1.js"></script>
	<script src="/socket.io/socket.io.js"></script>
    <script src="/scripts/chart.js/dist/Chart.min.js"></script>
  </head>
	<body>
		<div id="chart">
			<canvas id="myChart" width="100" height="30"></canvas>
		</div>
		<div id="win">
			Reality Win!
		</div>
		<script>
			var ctx = document.getElementById("myChart");
			var myChart = new Chart(ctx, {
				type: 'bar',
				data: {
					labels: ["Red", "Blue"],
					datasets: [{
						label: '# of Votes',
						data: [12, 19],
						backgroundColor: [
							'rgba(255, 99, 132, 0.2)',
							'rgba(54, 162, 235, 0.2)'
						],
						borderColor: [
							'rgba(255,99,132,1)',
							'rgba(54, 162, 235, 1)'
						],
						borderWidth: 1
					}]
				},
				options: {
					scales: {
						yAxes: [{
							ticks: {
								beginAtZero:true
							}
						}]
					}
				}
			});

			var socket = io();

			//Votes data event
			socket.on('votes', function (data) {
				myChart.data.datasets[0].data = [data.red, data.blue];
				myChart.update();
			});

			//Win event
			socket.on('win', function (data) {
				if (data.win === true) {
					$('#chart').hide();
					$('#win').show();
				}
			});
		</script>
	</body>
</html>